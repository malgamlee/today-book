{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useRef } from 'react';\nimport { debounce } from 'lodash';\nimport GA4React from 'ga-4-react';\nimport { useNavigate } from 'react-router-dom';\nimport { getGaKey } from 'utils/url';\nexport function useGA() {\n  _s();\n\n  const navigate = useNavigate();\n  const ga4react = useRef();\n  const initializeGA = useCallback(() => {\n    // https://analytics.google.com/analytics/web/\n    // https://developers.google.com/analytics\n    ga4react.current = new GA4React(getGaKey(), {}, [], 5000);\n    ga4react.current.initialize().then(() => null).catch(() => null);\n  }, []); // gtag('event', '<event_name>', {<event_params>});\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  const gaEvent = useCallback(debounce(_ref => {\n    let {\n      action,\n      data\n    } = _ref;\n    if (window.gtag) window.gtag('event', action, { ...(data || {})\n    });\n  }, 300), []);\n  const gaNavigate = useCallback((to, props) => {\n    gaEvent(props);\n    navigate(to);\n  }, [gaEvent, navigate]);\n  const gaPV = useCallback(pagePath => {\n    if (window.gtag) window.gtag('event', 'page_view', {\n      page_path: pagePath\n    });\n  }, []);\n  return {\n    initializeGA,\n    gaEvent,\n    gaNavigate,\n    gaPV\n  };\n}\n\n_s(useGA, \"rt458pb8Sdw820z4YK2tjdBD/mc=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useCallback","useRef","debounce","GA4React","useNavigate","getGaKey","useGA","navigate","ga4react","initializeGA","current","initialize","then","catch","gaEvent","action","data","window","gtag","gaNavigate","to","props","gaPV","pagePath","page_path"],"sources":["/Users/jijeong/study/bookStore-app/src/hooks/useGA.ts"],"sourcesContent":["import { useCallback, useRef } from 'react'\nimport { debounce } from 'lodash'\nimport GA4React from 'ga-4-react'\nimport { useNavigate } from 'react-router-dom'\n\nimport { getGaKey } from 'utils/url'\n\nexport interface GAProps {\n  action: string\n  data?: { [key: string]: unknown }\n}\n\nexport function useGA() {\n  const navigate = useNavigate()\n  const ga4react = useRef<GA4React>()\n\n  const initializeGA = useCallback((): void => {\n    // https://analytics.google.com/analytics/web/\n    // https://developers.google.com/analytics\n    ga4react.current = new GA4React(getGaKey(), {}, [], 5000)\n    ga4react.current\n      .initialize()\n      .then(() => null)\n      .catch(() => null)\n  }, [])\n\n  // gtag('event', '<event_name>', {<event_params>});\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const gaEvent = useCallback(\n    debounce(({ action, data }: GAProps): void => {\n      if (window.gtag)\n        window.gtag('event', action, {\n          ...(data || {}),\n        })\n    }, 300),\n    []\n  )\n\n  const gaNavigate = useCallback(\n    (to: string, props: GAProps): void => {\n      gaEvent(props)\n      navigate(to)\n    },\n    [gaEvent, navigate]\n  )\n\n  const gaPV = useCallback((pagePath: string): void => {\n    if (window.gtag)\n      window.gtag('event', 'page_view', {\n        page_path: pagePath,\n      })\n  }, [])\n\n  return {\n    initializeGA,\n    gaEvent,\n    gaNavigate,\n    gaPV,\n  }\n}\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,MAAtB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,QAAzB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,SAASC,QAAT,QAAyB,WAAzB;AAOA,OAAO,SAASC,KAAT,GAAiB;EAAA;;EACtB,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAMI,QAAQ,GAAGP,MAAM,EAAvB;EAEA,MAAMQ,YAAY,GAAGT,WAAW,CAAC,MAAY;IAC3C;IACA;IACAQ,QAAQ,CAACE,OAAT,GAAmB,IAAIP,QAAJ,CAAaE,QAAQ,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,IAAjC,CAAnB;IACAG,QAAQ,CAACE,OAAT,CACGC,UADH,GAEGC,IAFH,CAEQ,MAAM,IAFd,EAGGC,KAHH,CAGS,MAAM,IAHf;EAID,CAR+B,EAQ7B,EAR6B,CAAhC,CAJsB,CActB;EACA;;EACA,MAAMC,OAAO,GAAGd,WAAW,CACzBE,QAAQ,CAAC,QAAqC;IAAA,IAApC;MAAEa,MAAF;MAAUC;IAAV,CAAoC;IAC5C,IAAIC,MAAM,CAACC,IAAX,EACED,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAqBH,MAArB,EAA6B,EAC3B,IAAIC,IAAI,IAAI,EAAZ;IAD2B,CAA7B;EAGH,CALO,EAKL,GALK,CADiB,EAOzB,EAPyB,CAA3B;EAUA,MAAMG,UAAU,GAAGnB,WAAW,CAC5B,CAACoB,EAAD,EAAaC,KAAb,KAAsC;IACpCP,OAAO,CAACO,KAAD,CAAP;IACAd,QAAQ,CAACa,EAAD,CAAR;EACD,CAJ2B,EAK5B,CAACN,OAAD,EAAUP,QAAV,CAL4B,CAA9B;EAQA,MAAMe,IAAI,GAAGtB,WAAW,CAAEuB,QAAD,IAA4B;IACnD,IAAIN,MAAM,CAACC,IAAX,EACED,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAqB,WAArB,EAAkC;MAChCM,SAAS,EAAED;IADqB,CAAlC;EAGH,CALuB,EAKrB,EALqB,CAAxB;EAOA,OAAO;IACLd,YADK;IAELK,OAFK;IAGLK,UAHK;IAILG;EAJK,CAAP;AAMD;;GA/CehB,K;UACGF,W"},"metadata":{},"sourceType":"module"}